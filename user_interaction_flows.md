# SRM 系统用户交互流程梳理

## 文档说明

本文档从用户角度梳理 SRM 系统的所有可能交互流程，用于测试用例设计和验证。

---

## 目录

1. [认证流程](#1-认证流程)
2. [全局导航流程](#2-全局导航流程)
3. [供应商列表流程](#3-供应商列表流程)
4. [供应商详情流程](#4-供应商详情流程)
5. [文件管理流程](#5-文件管理流程)
6. [日历功能流程](#6-日历功能流程)
7. [绩效管理流程](#7-绩效管理流程)
8. [业务配置流程](#8-业务配置流程)
9. [异常和边界流程](#9-异常和边界流程)

---

## 1. 认证流程

### 1.1 用户注册流程

```
用户打开应用
        ↓
[路径A] 用户已有账号
        ↓
    直接登录 → 跳过注册流程
        ↓
    进入系统首页

[路径B] 用户是新用户
        ↓
    在登录页点击"立即注册"
        ↓
    进入注册页面
        ↓
    [交互1] 输入姓名
        ↓
    [交互2] 输入邮箱地址
        ↓
    [交互3] 选择邮箱格式验证 (如自动完成)
        ↓
    [交互4] 输入密码
        ↓
    [交互5] 输入确认密码
        ↓
    [交互6] 点击"注册"按钮
        ↓
    [验证点1] 姓名必填检查
        ├─ 通过 → 继续
        └─ 不通过 → 显示错误提示，高亮姓名字段
        ↓
    [验证点2] 邮箱格式检查
        ├─ 通过 → 继续
        └─ 不通过 → 显示错误提示，高亮邮箱字段
        ↓
    [验证点3] 密码长度检查 (≥6位)
        ├─ 通过 → 继续
        └─ 不通过 → 显示"密码长度至少为6位"
        ↓
    [验证点4] 密码确认匹配检查
        ├─ 通过 → 继续
        └─ 不通过 → 显示"两次输入的密码不一致"
        ↓
    [提交] 提交注册请求
        ↓
    [场景A] 注册成功 (邮箱未启用确认)
        ├─ API 调用成功
        ├─ 自动登录
        ├─ 存储用户信息
        └─ 跳转到首页 (显示欢迎消息)
        ↓
    [场景B] 邮箱已启用确认
        ├─ API 调用成功
        ├─ 显示"请查收确认邮件"提示
        └─ 保持当前页面，等待用户确认
        ↓
    [场景C] 注册失败 (网络错误/邮箱已存在)
        ├─ API 返回错误
        └─ 显示错误提示框
```

### 1.2 用户登录流程

```
用户打开应用
        ↓
[路由检查] 已登录？
        ├─ 是 → 直接进入首页
        └─ 否 → 进入登录流程
        ↓
进入登录页面
        ↓
    [交互1] 输入邮箱地址
        ↓
    [交互2] 输入密码
        ↓
    [交互3] 点击"显示密码"切换可见性
        ↓
    [交互4] 点击"登录"按钮
        ↓
    [验证点1] 邮箱必填检查
        ├─ 通过 → 继续
        └─ 不通过 → 显示错误，聚焦邮箱字段
        ↓
    [验证点2] 密码必填检查
        ├─ 通过 → 继续
        └─ 不通过 → 显示错误，聚焦密码字段
        ↓
    [提交] 提交登录请求
        ↓
    [场景A] 登录成功
        ├─ API 调用成功
        ├─ 存储 token
        ├─ 存储用户信息
        └─ 跳转到首页
        ↓
    [场景B] 登录失败 (密码错误)
        ├─ API 返回 401
        ├─ 显示"登录失败"错误提示
        ├─ 清空密码字段
        └─ 聚焦密码字段
        ↓
    [场景C] 登录失败 (用户不存在)
        ├─ API 返回 401
        ├─ 显示"登录失败"错误提示
        └─ 建议用户注册
        ↓
    [场景D] 网络错误
        ├─ 请求超时/失败
        ├─ 显示"网络连接失败"错误
        └─ 提供重试按钮
```

### 1.3 退出登录流程

```
用户在任何页面
        ↓
    点击用户菜单/头像
        ↓
    点击"退出登录"
        ↓
    [确认] 是否显示确认对话框?
        ├─ 是 → 用户确认后退出
        └─ 否 → 直接退出
        ↓
    清除本地 token
        ↓
    跳转到登录页
```

### 1.4 路由保护流程

```
用户访问受保护页面
        ↓
    [场景A] 未登录 → ProtectedRoute 检测
        ├─ 存储当前目标路径
        └─ 重定向到 /login
        ↓
    [场景B] 已登录 → ProtectedRoute 检测
        └─ 渲染子组件
        ↓
用户访问公共页面 (登录/注册)
        ↓
    [场景A] 已登录 → PublicRoute 检测
        ├─ 重定向到首页
        └─ 避免重复登录
        ↓
    [场景B] 未登录 → PublicRoute 检测
        └─ 渲染登录/注册页面
```

---

## 2. 全局导航流程

### 2.1 侧边栏菜单导航

```
用户在任意页面
        ↓
    查看左侧边栏菜单
        ↓
    [交互1] 点击"驾驶舱"菜单项
        ├─ 路由跳转到 /
        ├─ 菜单高亮
        └─ 加载 Dashboard 页面
        ↓
    [交互2] 点击"潜在供应商"菜单项
        ├─ 路由跳转到 /supplier-profile?type=potential
        ├─ 菜单高亮
        └─ 加载 SupplierList 页面 (筛选为潜在)
        ↓
    [交互3] 点击"合作供应商"菜单项
        ├─ 路由跳转到 /supplier-profile?type=active
        ├─ 菜单高亮
        └─ 加载 SupplierList 页面 (筛选为合作)
        ↓
    [交互4] 点击"战略供应商"菜单项
        ├─ 路由跳转到 /supplier-profile?type=strategic
        ├─ 菜单高亮
        └─ 加载 SupplierList 页面 (筛选为战略)
        ↓
    [交互5] 点击"黑名单"菜单项
        ├─ 路由跳转到 /supplier-profile?type=blacklist
        ├─ 菜单高亮
        └─ 加载 SupplierList 页面 (筛选为黑名单)
        ↓
    [交互6] 点击"业务配置"菜单项
        ├─ 路由跳转到 /settings
        ├─ 菜单高亮
        └─ 加载 SystemSettings 页面
        ↓
    [交互7] 点击"支持中心"菜单项
        ├─ 展开/收起子菜单
        └─ 显示"ODC 审计"子菜单项
        ↓
    [交互8] 点击"ODC 审计"子菜单
        ├─ 路由跳转到 /support/odc-audit
        └─ 加载 Placeholder 页面
```

### 2.2 新路由导航 (suppliers)

```
用户在供应商列表
        ↓
    [路径A] 点击供应商列表项
        ├─ 读取供应商 ID
        └─ 跳转到 /suppliers/:id (新路由)
        ↓
    [路径B] 点击搜索结果
        └─ 跳转到 /suppliers/:id (新路由)
        ↓
    [兼容] 旧路由 /supplier-profile/:id 仍然可用
        └─ 自动跳转到相同页面
```

### 2.3 全局搜索

```
用户在任意页面 (顶部搜索框)
        ↓
    [交互1] 点击搜索框
        ├─ 聚焦搜索框
        └─ 显示历史搜索记录 (如有)
        ↓
    [交互2] 输入搜索关键词
        ├─ 实时筛选建议 (如供应商名称)
        └─ 或输入后等待用户操作
        ↓
    [交互3] 按回车键
        ├─ 触发搜索
        └─ 跳转到供应商列表 + 应用筛选
        ↓
    [交互4] 点击搜索结果建议
        ├─ 跳转到对应供应商详情
        └─ 高亮搜索关键词
```

---

## 3. 供应商列表流程

### 3.1 页面加载和筛选

```
用户访问供应商列表
        ↓
    [加载] 显示骨架屏/加载动画
        ↓
    [数据加载] 并行获取:
        ├─ 供应商列表数据
        └─ 供应商统计 (各层级数量)
        ↓
    [显示] 渲染供应商列表
        ↓
    [交互1] 点击"全部"标签
        ├─ URL 变为 /supplier-profile (或 /suppliers)
        ├─ 显示所有供应商
        └─ 标签高亮"全部"
        ↓
    [交互2] 点击"潜在供应商"标签
        ├─ URL 添加 ?type=potential
        ├─ 筛选 tier='probation'
        └─ 标签高亮"潜在供应商"
        ↓
    [交互3] 点击"合作供应商"标签
        ├─ URL 添加 ?type=active
        ├─ 筛选 tier in ['core', 'backup']
        └─ 标签高亮"合作供应商"
        ↓
    [交互4] 点击"战略供应商"标签
        ├─ URL 添加 ?type=strategic
        ├─ 筛选 tier='strategic'
        └─ 标签高亮"战略供应商"
        ↓
    [交互5] 点击"黑名单"标签
        ├─ URL 添加 ?type=blacklist
        ├─ 筛选 tier='blacklisted'
        └─ 标签高亮"黑名单"
        ↓
    [场景] 空列表
        ├─ 显示"暂无供应商"提示
        └─ 显示"新增供应商"按钮
```

### 3.2 搜索功能

```
用户在供应商列表页
        ↓
    [交互1] 点击搜索框
        ├─ 聚焦搜索框
        └─ 清空占位符
        ↓
    [交互2A] 输入供应商名称
        ├─ 实时筛选 (显示匹配建议)
        ├─ 按回车 → 执行搜索
        └─ 显示匹配的供应商
        ↓
    [交互2B] 输入供应商代码
        ├─ 实时筛选
        ├─ 按回车 → 执行搜索
        └─ 显示匹配的供应商
        ↓
    [交互2C] 输入中文名称
        ├─ 实时筛选
        ├─ 按回车 → 执行搜索
        └─ 显示匹配的供应商
        ↓
    [交互3] 搜索无结果
        ├─ 显示"未找到匹配的供应商"
        └─ 提供"新增供应商"按钮
        ↓
    [交互4] 清空搜索框
        ├─ 移除筛选条件
        ├─ 重新加载所有供应商
        └─ 恢复完整列表
        ↓
    [交互5] 点击搜索建议 (如有)
        ├─ 跳转到该供应商详情页
        └─ 关闭搜索建议
```

### 3.3 创建供应商流程

```
用户在供应商列表页
        ↓
    [交互1] 点击"新增供应商"按钮
        ├─ 打开 CreateSupplierModal 模态框
        └─ 背景遮罩层显示
        ↓
    [交互2] 填写供应商代码 (必填)
        ├─ [实时验证] 代码格式检查
        ├─ [实时验证] 检查代码是否已存在
        └─ [错误提示] 如已存在 → 显示错误，禁用提交
        ↓
    [交互3] 填写供应商名称 (必填)
        ├─ 输入名称
        └─ 检查通过
        ↓
    [交互4] 填写中文名称 (可选)
        ├─ 输入中文名
        └─ 检查通过
        ↓
    [交互5] 选择类别 (下拉选择)
        ├─ 展开类别选项
        ├─ 选择类别 (Ocean Carrier, Freight Forwarder, etc.)
        └─ 收起下拉
        ↓
    [交互6] 填写地理位置 (可选)
        ├─ 输入位置
        └─ 检查通过
        ↓
    [交互7] 填写地址 (可选)
        ├─ 输入详细地址
        └─ 检查通过
        ↓
    [交互8] 填写组织架构 (可选)
        ├─ 输入组织信息
        └─ 检查通过
        ↓
    [交互9] 选择/输入标签 (可选)
        ├─ 输入标签
        └─ 或从预设中选择
        ↓
    [交互10] 点击"取消"按钮
        ├─ 关闭模态框
        └─ 放弃所有输入
        ↓
    [交互11] 点击"创建"按钮
        ├─ [验证] 所有必填字段已填写
        ├─ 显示"创建中..."加载状态
        ├─ API 调用 createSupplier()
        └─ 关闭模态框
        ↓
    [结果A] 创建成功
        ├─ 显示"供应商创建成功"提示
        ├─ 自动刷新供应商列表
        ├─ 新供应商出现在列表中
        └─ 表单重置
        ↓
    [结果B] 创建失败 (网络错误/验证错误)
        ├─ 显示错误提示
        └─ 保持模态框打开，保留输入
```

### 3.4 晋升供应商流程

```
用户在"潜在供应商"列表页
        ↓
    [交互1] 点击"晋升为合作供应商"按钮
        ├─ 打开 AddPartnerModal 模态框
        └─ 背景遮罩显示
        ↓
    [显示] 显示可晋升的供应商列表
        ├─ 查询 tier='probation' 的供应商
        └─ 列表显示在模态框中
        ↓
    [交互2] 选择单个供应商
        ├─ 点击供应商行
        ├─ 复选框打钩选中
        └─ 按钮显示"确认添加 (1)"
        ↓
    [交互3] 取消选择
        ├─ 再次点击已选中行
        ├─ 复选框取消选中
        └─ 按钮恢复为"确认添加"
        ↓
    [交互4] 选择多个供应商
        ├─ 逐个点击多个供应商行
        ├─ 所有被点击的复选框打钩
        └─ 按钮显示"确认添加 (N)"，N 为选中数量
        ↓
    [交互5] 点击表头复选框 (全选)
        ├─ 所有供应商复选框打钩
        └─ 按钮显示"取消全选"
        ↓
    [交互6] 点击"确认添加"按钮
        ├─ [验证] 至少选中一个供应商
        ├─ 显示"晋升中..."加载状态
        ├─ API 批量更新 tier: 'probation' → 'core'
        ├─ 关闭模态框
        ├─ 自动刷新供应商列表
        └─ 显示"已晋升 N 个供应商"成功提示
        ↓
    [交互7] 点击"取消"按钮或关闭
        ├─ 关闭模态框
        └─ 放弃所有选择
        ↓
    [场景] 无可晋升供应商
        ├─ 点击"晋升为合作供应商"按钮
        ├─ 显示"没有可供晋升的供应商"提示
        └─ 禁用确认按钮
```

### 3.5 供应商列表项交互

```
用户在供应商列表页
        ↓
    [交互1] 点击供应商卡片
        ├─ 读取供应商 ID
        └─ 跳转到 /suppliers/:id 详情页
        ↓
    [交互2] 鼠标悬停在卡片上
        ├─ 显示高亮/阴影效果
        └─ 显示更多操作按钮 (如有)
        ↓
    [交互3] 右键菜单 (如有)
        ├─ 显示菜单 (编辑/删除/其他操作)
        └─ 提供快速操作入口
        ↓
    [交互4] 点击层级标签 (快速筛选)
        ├─ 自动筛选对应层级供应商
        └─ 刷新列表显示
```

---

## 4. 供应商详情流程

### 4.1 页面加载和标签切换

```
用户访问供应商详情页 /suppliers/:id
        ↓
    [加载] 并行获取 6 个标签页数据:
        ├─ 资产标签数据 (基本信息、业务线、联系人)
        ├─ 资源标签数据 (稀缺资源)
        ├─ 互动标签数据 (互动日志列表)
        ├─ 绩效标签数据 (绩效历史、评估记录)
        ├─ 合同标签数据 (合同列表)
        └─ 决策链标签数据 (决策链成员)
        ↓
    [显示] 默认显示"资产"标签内容
        ├─ 渲染基本信息表单
        ├─ 渲染业务线列表
        └─ 渲染联系人列表
        ↓
    [交互1] 点击"资源"标签
        ├─ 切换到资源标签
        └─ 标签高亮变为"资源"
        ↓
    [交互2] 点击"互动"标签
        ├─ 切换到互动标签
        └─ 标签高亮变为"互动"
        ↓
    [交互3] 点击"绩效"标签
        ├─ 切换到绩效标签
        └─ 标签高亮变为"绩效"
        ↓
    [交互4] 点击"合同"标签
        ├─ 切换到合同标签
        └─ 标签高亮变为"合同"
        ↓
    [交互5] 点击"决策链"标签
        ├─ 切换到决策链标签
        └─ 标签高亮变为"决策链"
        ↓
    [交互6] 返回列表按钮
        ├─ 点击"返回"按钮/箭头
        └─ 跳转回供应商列表
```

### 4.2 资产标签 - 基本信息编辑

```
用户在供应商详情"资产"标签
        ↓
    [显示] 查看基本信息表单
        ├─ 供应商名称
        ├─ 供应商代码
        ├─ 中文名称
        ├─ 状态标签 (active/inactive/blacklisted)
        ├─ 层级标签 (战略/核心/储备/考察/黑名单)
        └─ 阶段标签
        ↓
    [交互1] 点击"编辑"按钮
        ├─ 表单字段变为可编辑状态
        └─ 按钮变为"保存"
        ↓
    [交互2A] 修改供应商名称
        ├─ 输入新名称
        └─ 失焦触发自动保存
        ↓
    [交互2B] 修改类别
        ├─ 点击类别下拉
        ├─ 选择新类别
        └─ 失焦触发自动保存
        ↓
    [交互2C] 修改地理位置
        ├─ 输入新位置
        └─ 失焦触发自动保存
        ↓
    [交互2D] 修改地址
        ├─ 输入详细地址
        └─ 失焦触发自动保存
        ↓
    [交互3] 点击"取消"按钮
        ├─ 恢复原值
        └─ 按钮恢复为"编辑"
        ↓
    [交互4] 点击"保存"按钮
        ├─ 提交所有变更
        ├─ API 调用 updateSupplier()
        ├─ 按钮恢复为"编辑"
        └─ 显示"已保存"提示 (2秒后消失)
        ↓
    [自动保存] 用户修改任何字段后失焦
        ├─ 检测到数据变更
        ├─ API 调用 updateSupplier()
        ├─ 显示"保存中..."
        └─ 成功后显示"已保存"
```

### 4.3 资产标签 - 业务线管理

```
用户在供应商详情"资产"标签
        ↓
    [显示] 查看业务线列表区域
        ├─ 显示已添加的业务线
        ├─ 每个业务线卡片显示: 类型、描述、承运人、航线
        └─ 右侧有"添加业务线"按钮
        ↓
    [交互1] 点击"添加业务线"按钮
        ├─ 打开业务线表单模态框
        └─ 背景遮罩显示
        ↓
    [交互2] 选择业务类型 (下拉)
        ├─ 类型选项: 海运/空运/陆运/铁路等
        └─ 选择类型
        ↓
    [交互3] 填写描述
        ├─ 输入业务线描述
        └─ 继续下一步
        ↓
    [交互4] 添加承运人
        ├─ 显示承运人输入列表
        ├─ 点击"+"添加承运人
        ├─ 输入承运人名称
        └─ 添加到列表
        ↓
    [交互5] 添加航线 (可选)
        ├─ 显示航线输入区域
        ├─ 输入航线信息
        └─ 添加到列表
        ↓
    [交互6] 点击"取消"按钮
        ├─ 关闭表单模态框
        └─ 放弃所有输入
        ↓
    [交互7] 点击"创建"按钮
        ├─ [验证] 必填字段已填写
        ├─ API 调用 createBusinessLine()
        ├─ 关闭模态框
        ├─ 刷新业务线列表
        └─ 新业务线出现在列表中
        ↓
    [交互8] 点击业务线卡片
        ├─ 展开显示详情 (更多承运人、更多航线)
        └─ 提供编辑选项
        ↓
    [交互9] 点击"编辑"业务线
        ├─ 打开编辑表单，预填现有数据
        └─ 可修改所有字段
        ↓
    [交互10] 点击"删除"业务线
        ├─ 显示确认对话框
        ├─ 确认后删除
        └─ 刷新列表
```

### 4.4 资产标签 - 联系人管理

```
用户在供应商详情"资产"标签
        ↓
    [显示] 查看联系人区域
        ├─ 每个业务线卡片下方显示联系人列表
        ├─ 联系人信息: 姓名、电话、邮箱
        └─ "添加联系人"按钮
        ↓
    [交互1] 点击"添加联系人"
        ├─ 打开联系人表单
        ├─ 输入姓名 (必填)
        ├─ 输入电话
        └─ 输入邮箱
        ↓
    [交互2] 点击"保存"按钮
        ├─ API 调用 createBusinessLineContact()
        ├─ 刷新联系人列表
        └─ 新联系人出现在列表中
        ↓
    [交互3] 点击联系人操作菜单
        ├─ 显示选项: 编辑/删除
        └─ 提供快速操作
```

### 4.5 资源标签 - 稀缺资源管理

```
用户在供应商详情点击"资源"标签
        ↓
    [加载] 获取该供应商的稀缺资源列表
        ↓
    [显示] 查看资源列表
        ├─ 每个资源显示: 资源名称、关联决策链成员
        └─ 右上角有"添加资源"按钮
        ↓
    [交互1] 点击"添加资源"
        ├─ 打开资源表单模态框
        └─ 背景遮罩显示
        ↓
    [交互2] 选择资源类型
        ├─ 类型选项: 产能/技术/渠道等
        └─ 选择类型
        ↓
    [交互3] 输入资源名称
        ├─ 输入资源名称
        └─ 继续下一步
        ↓
    [交互4] 关联决策链成员
        ├─ 显示可用决策链成员列表
        ├─ 点击成员复选框关联
        └─ 可关联多个成员
        ↓
    [交互5] 输入描述
        ├─ 输入资源描述
        └─ 继续下一步
        ↓
    [交互6] 点击"创建"按钮
        ├─ API 调用 createResource()
        ├─ 关闭模态框
        └─ 刷新资源列表
        ↓
    [交互7] 点击资源卡片
        ├─ 显示详情视图
        └─ 提供编辑/删除操作
        ↓
    [交互8] 点击"删除资源"
        ├─ 显示确认对话框
        ├─ 确认后删除
        └─ 刷新列表
```

### 4.6 互动标签 - 互动日志管理 (PACD 模型)

```
用户在供应商详情点击"互动"标签
        ↓
    [加载] 获取互动日志列表
        ↓
    [显示] 默认显示所有日志 (按时间倒序)
        ├─ 每个日志显示: 日期、类型、标题、状态
        ├─ 计划中日志: 蓝色标记
        ├─ 已完成日志: 绿色标记
        └─ 右上角有"新建互动"按钮
        ↓
    [交互1] 点击"新建互动"按钮
        ├─ 打开互动日志表单 (PACD 模型)
        └─ 背景遮罩显示
        ↓
    [表单区域] 计划阶段 (P)
        ├─ [交互1A] 选择计划日期
            │   └─ 日期选择器显示
        ├─ [交互1B] 选择互动类型
            │   ├─ 类型选项: QBR/Regular/Visit/Call/Email
            │   └─ 选择类型
        ├─ [交互1C] 输入标题 (必填)
            │   ├─ 输入互动标题
            │   └─ 实时验证通过
        ├─ [交互1D] 填写目标
            │   └─ 输入本次互动目标
        ↓
    [表单区域] 执行阶段 (A)
        ├─ [交互1E] 添加参与人
            │   ├─ 输入参与人姓名
            │   └─ 添加到参与列表
        ↓
    [表单区域] 执行阶段 (A) 完成，点击"下一步"
        └─ 切换到执行阶段表单
        ↓
    [表单区域] 执行阶段 (A)
        ├─ [交互1F] 选择执行状态
            │   ├─ 显示状态选项: 计划中/已完成/已取消
            │   └─ 选择"已完成"
        ├─ [交互2A] 填写执行结果
            │   └─ 输入执行情况描述
        ↓
    [交互2B] 评分 (已完成时)
            │   ├─ 显示 1-5 星评分组件
            │   ├─ 点击星星设置评分
            │   └─ 评分必填 (如状态为已完成)
        ↓
    [表单区域] 评估阶段 (C)
        ├─ 显示四维度维护字段
        ├─ [交互2D] dimension_basic: 基本信息变更
            │   └─ 输入基本信息是否变更
        ├─ [交互2E] dimension_business: 主营业务特点
            │   └─ 输入业务特点变更
        ├─ [交互2F] dimension_decision: 决策链特点
            │   └─ 输入决策链特点变更
        └─ [交互2G] dimension_derivative: 衍生资源
            │   └─ 输入衍生资源信息
        ↓
    [表单区域] 行动阶段 (D)
        ├─ [交互1H] 输入后续行动
            │   └─ 输入后续计划
        ├─ [交互1I] 选择行动标签
            │   └─ 选择标签 (跟进/已关闭/需支持等)
        ├─ [交互1J] 输入行动备注
            │   └─ 输入详细备注
        ↓
    [交互2] 点击"提交"按钮
        ├─ [验证] 标题已填写
        ├─ 显示"保存中..."状态
        ├─ API 调用 createEngagementLog()
        ├─ 关闭表单
        ├─ 刷新互动日志列表
        └─ 新日志出现在列表顶部
        ↓
    [交互3] 点击日志卡片展开
        ├─ 展开显示完整日志详情
        ├─ 显示 PACD 四个阶段信息
        └─ 提供编辑/删除操作
        ↓
    [交互4] 点击状态筛选
        ├─ 点击"全部"/"计划中"/"已完成"标签
        ├─ 重新筛选日志列表
        └─ 列表按新筛选条件更新
        ↓
    [交互5] 点击"编辑"按钮
        ├─ 打开编辑表单，预填现有数据
        └─ 可修改所有字段
        ↓
    [交互6] 点击"删除"按钮
        ├─ 显示确认对话框
        ├─ 确认后删除
        └─ 刷新列表
```

### 4.7 绩效标签 - 绩效历史和评估

```
用户在供应商详情点击"绩效"标签
        ↓
    [加载] 获取绩效数据和评估记录
        ↓
    [显示A] 绩效趋势图
        ├─ 显示最近 6 个月的趋势折线图
        ├─ X 轴: 月份
        ├─ Y 轴: 绩效分数
        └─ 显示分数趋势
        ↓
    [显示B] 评估记录列表
        ├─ 每个评估显示: 评估周期、总分、评估人
        └─ 右上角有"添加评估"按钮
        ↓
    [交互1] 点击"添加评估"按钮
        ├─ 打开评估表单模态框
        └─ 背景遮罩显示
        ↓
    [交互2] 选择评估周期
        ├─ 显示周期选择器
        ├─ 选择: Q1/Q2/Q3/Q4 (年度季度)
        └─ 确定选择
        ↓
    [交互3] 显示绩效配置维度
        ├─ 读取供应商的绩效配置
        ├─ 显示各维度配置 (质量/交付/成本/服务等)
        └─ 显示权重
        ↓
    [交互4] 输入各维度评分
        ├─ 为每个维度输入 0-100 分数
        ├─ 自动计算加权总分
        └─ 实时显示计算结果
        ↓
    [交互5] 填写评语
        ├─ 输入评估评语
        └─ 继续下一步
        ↓
    [交互6] 点击"提交评估"按钮
        ├─ [验证] 所有评分已填写
        ├─ 显示"提交中..."状态
        ├─ API 调用 createPerformanceEvaluation()
        ├─ 关闭模态框
        ├─ 刷新评估记录列表
        ├─ 更新供应商 system_score
        └─ 显示"评估提交成功"提示
        ↓
    [交互7] 点击评估记录查看
        ├─ 展开显示详细评估信息
        └─ 提供编辑/删除选项
```

### 4.8 合同标签 - 合同管理

```
用户在供应商详情点击"合同"标签
        ↓
    [加载] 获取该供应商的合同列表
        ↓
    [显示] 查看合同列表
        ├─ 每个合同显示: 合同编号、类型、有效期、状态
        ├─ 有效期状态: 即将过期显示黄色
        ├─ 已过期显示红色
        └─ 有效显示绿色
        ↓
    [交互1] 点击"添加合同"按钮
        ├─ 打开合同表单模态框
        └─ 背景遮罩显示
        ↓
    [交互2] 选择合同类型
        ├─ 类型选项: 框架合同/服务合同等
        └─ 选择类型
        ↓
    [交互3] 上传合同文件 (可选)
        ├─ 点击"上传文件"按钮
        ├─ 文件选择器打开
        ├─ 选择合同文件
        └─ 文件上传进度显示
        ↓
    [交互4] 填写合同基本信息
        ├─ 输入合同编号
        ├─ 选择合同起止日期
        └─ 输入合同金额
        ↓
    [交互5] 点击"创建"按钮
        ├─ [验证] 必填字段已填写
        ├─ API 调用 createContract()
        ├─ 关闭模态框
        ├─ 刷新合同列表
        └─ 新合同出现在列表中
        ↓
    [交互6] 点击合同卡片
        ├─ 展开显示合同详情
        └─ 提供下载/编辑/删除操作
        ↓
    [交互7] 点击"下载"按钮
        ├─ 生成签名 URL
        ├─ 触发浏览器下载
        └─ 或在新标签页打开预览
        ↓
    [交互8] 点击"删除"按钮
        ├─ 显示确认对话框
        ├─ 确认后删除
        └─ 刷新列表
```

### 4.9 决策链标签 - 决策链管理

```
用户在供应商详情点击"决策链"标签
        ↓
    [加载] 获取决策链成员数据
        ↓
    [显示] 查看决策链图谱
        ├─ 三层结构显示:
        │   ├─ Decision 层 (决策层)
        │   ├─ Execution 层 (执行层)
        │   └─ Operation 层 (操作层)
        └─ 每个成员显示在对应层级中
        ├─ 成员卡片信息: 姓名、职位、角色
        ├─ 亲密度显示: 1-5 星星或进度条
        └─ 关联的稀缺资源显示 (如有)
        ↓
    [交互1] 点击"添加成员"按钮
        ├─ 打开成员表单模态框
        └─ 背景遮罩显示
        ↓
    [交互2] 输入成员姓名 (必填)
        ├─ 输入成员姓名
        └─ 实时验证通过
        ↓
    [交互3] 输入职位
        ├─ 输入职位名称
        └─ 继续下一步
        ↓
    [交互4] 选择层级
        ├─ 显示层级下拉选择器
        ├─ 选项: Decision/Execution/Operation
        └─ 选择层级
        ↓
    [交互5] 选择角色
        ├─ 显示角色下拉选择器
        ├─ 选项: Decision Maker/Influencer/Executor
        └─ 选择角色
        ↓
    [交互6] 设置亲密度
        ├─ 显示 1-5 滑块或星星选择器
        ├─ 拖动滑块设置亲密度
        └─ 实时显示当前值
        ↓
    [交互7] 选择关联稀缺资源 (可选)
        ├─ 显示可用资源列表
        ├─ 点击资源复选框关联
        └─ 可关联多个资源
        ↓
    [交互8] 填写备注信息 (可选)
        ├─ 输入备注信息
        └─ 继续下一步
        ↓
    [交互9] 点击"创建"按钮
        ├─ [验证] 姓名已填写
        ├─ API 调用 createDecisionChainMember()
        ├─ 关闭模态框
        └─ 刷新决策链图谱
        ├─ 新成员出现在对应层级
        ↓
    [交互10] 点击成员卡片
        ├─ 展开显示成员详情
        └─ 提供编辑/删除操作
        ↓
    [交互11] 点击"编辑"按钮
        ├─ 打开编辑表单，预填现有数据
        └─ 可修改所有字段
        ↓
    [交互12] 调整亲密度滑块
        ├─ 拖动滑块修改亲密度
        └─ 失焦自动保存
        ↓
    [交互13] 点击"删除成员"按钮
        ├─ 显示确认对话框
        ├─ 确认后删除
        └─ 刷新图谱
```

### 4.10 返回和导航

```
用户在供应商详情页
        ↓
    [交互1] 点击面包屑导航
        ├─ 点击 "供应商列表" 或 "<< 返回"
        ├─ 返回到供应商列表页
        └─ 保持筛选状态
        ↓
    [交互2] 使用浏览器前进/后退
        ├─ 前进/后退一页
        └─ 保持页面状态
        ↓
    [交互3] 点击浏览器返回
        ├─ 返回上一页
        └─ 或退出登录
```

---

## 5. 文件管理流程

### 5.1 文件上传流程

```
用户在供应商详情"资产"标签中
        ↓
    [交互1] 切换到"文件"标签
        ├─ 路由到详情页文件部分
        └─ 刷新获取文件列表
        ↓
    [显示] 查看文件列表区域
        ├─ 每个文件显示: 文件名、类型、大小、上传日期
        └─ 右上角有"上传文件"按钮
        ↓
    [交互2] 点击"上传文件"按钮
        ├─ 打开 FileUploadDialog 模态框
        └─ 背景遮罩显示
        ↓
    [交互3] 选择文件类型 (可选)
        ├─ 显示类型下拉选择器
        ├─ 类型选项: 营业执照/认证证书/合同文件/财务文件/其他
        └─ 选择类型
        ↓
    [交互4] 点击"选择文件"按钮
        ├─ 打开系统文件选择器
        ├─ 浏览本地文件
        └─ 选择文件
        ↓
    [验证点1] 文件类型检查
        ├─ 允许的类型: 通过
        └─ 不允许的类型 (如 .exe): 显示错误，阻止上传
        ↓
    [验证点2] 文件大小检查
        ├─ 显示文件大小
        ├─ 超过限制 (如 10MB): 显示"文件过大"错误
        └─ 阻止上传
        ↓
    [交互5] 点击"上传"按钮
        ├─ 显示上传进度条 (0-100%)
        ├─ 文件分段上传
        └─ 实时更新进度百分比
        ↓
    [场景A] 上传成功
        ├─ 文件上传完成
        ├─ 调用 createSupplierFile() 创建数据库记录
        ├─ 关闭上传对话框
        ├─ 刷新文件列表
        └─ 新文件出现在列表中
        ↓
    [场景B] 上传失败 (网络错误)
        ├─ 显示错误提示
        ├─ 显示"重试"按钮
        └─ 保持对话框打开
        ↓
    [交互6] 点击"取消"按钮
        ├─ 关闭上传对话框
        └─ 放弃文件选择
```

### 5.2 文件列表交互

```
用户在文件标签查看文件列表
        ↓
    [显示] 查看文件列表
        ├─ 文件按时间倒序排列
        ├─ 文件类型图标显示
        └─ 文件大小格式化显示 (KB/MB)
        ↓
    [交互1] 按文件类型筛选
        ├─ 点击类型下拉选择器
        ├─ 选择特定类型 (如"营业执照")
        └─ 刷新列表，只显示该类型文件
        ↓
    [交互2] 搜索文件名
        ├─ 在搜索框输入文件名关键词
        └─ 实时筛选文件列表
        └─ 显示匹配的文件
        ↓
    [交互3] 点击文件卡片
        ├─ 展开文件详情视图
        ├─ 显示完整文件信息
        └─ 显示操作按钮: 下载/编辑/删除
        ↓
    [交互4] 点击"下载"按钮
        ├─ 生成签名 URL (有效期 1 小时)
        ├─ 触发浏览器下载
        └─ 下载完成后显示提示
        ↓
    [交互5] 点击"删除"按钮
        ├─ 显示确认对话框: "确认删除文件 X?"
        ├─ 确认后调用 deleteSupplierFile()
        ├─ 从 Storage 删除文件
        └─ 删除数据库记录
        └─ 刷新文件列表
```

### 5.3 文件预览 (如支持)

```
用户在文件列表点击可预览文件 (PDF/图片)
        ↓
    [交互] 点击文件卡片
        ├─ 生成预览 URL
        ├─ 在新标签页打开预览
        └─ 嵌入预览组件显示文件内容
        ↓
    [交互] 预览操作
        ├─ 放大/缩小
        ├─ 翻页
        └─ 下载/打印
        ↓
    [交互] 关闭预览
        └─ 返回文件标签
```

---

## 6. 日历功能流程

### 6.1 日历视图和导航

```
用户在驾驶舱查看日历区域
        ↓
    [显示] 查看当月日历视图
        ├─ 显示 7x5 网格
        ├─ 当前日期高亮
        ├─ 有事件的日期显示标记
        └─ 每个标记用颜色区分状态
        ↓
    [交互1] 点击上/下月切换
        ├─ 日历切换到上/下一月
        ├─ 重新获取该月事件数据
        └─ 刷新日历显示
        ↓
    [交互2] 点击"返回今天"按钮
        ├─ 日历回到当前月份
        └─ 今天日期重新高亮
        ↓
    [交互3] 点击有标记的日期
        ├─ 显示当天的事件弹出层
        ├─ 列出所有事件 (标题、时间、状态)
        └─ 提供快速查看选项
        ↓
    [交互4] 点击无事件的日期
        ├─ 显示"暂无事件"提示
        ├─ 提供快速操作:"新建事件"
        └─ 或显示供应商选择器 (如有)
```

### 6.2 创建日历事件流程

```
用户在驾驶舱日历区域
        ↓
    [路径A] 点击"新建事件"按钮
        ├─ 打开事件创建表单模态框
        └─ 背景遮罩显示
        ↓
    [交互1] 填写事件标题 (必填)
        ├─ 输入事件标题
        └─ 实时验证通过
        ↓
    [交互2] 选择事件类型
        ├─ 显示类型下拉选择器
        ├─ 选项: 拜访/ QBR/宴请/评审/电话/其他
        ├─ 每个选项带图标
        └─ 选择类型
        ↓
    [交互3] 选择日期
        ├─ 显示日期选择器
        ├─ 选择事件日期
        └─ 继续下一步
        ↓
    [交互4] 选择关联供应商 (可选)
        ├─ 显示供应商搜索选择器
        ├─ 输入供应商名称搜索
        ├─ 选择供应商
        └─ 继续下一步
        ↓
    [交互5] 填写地点/位置 (可选)
        ├─ 输入会议地点
        └─ 继续下一步
        ↓
    [交互6] 填写参与人 (可选)
        ├─ 输入参与人姓名
        └─ 添加到参与列表
        └─ 继续下一步
        ↓
    [交互7] 填写计划时长
        ├─ 输入预计时长 (分钟)
        └─ 继续下一步
        ↓
    [交互8] 填写备注 (可选)
        ├─ 输入事件备注
        └─ 继续下一步
        ↓
    [交互9] 点击"创建"按钮
        ├─ [验证] 标题和日期已填写
        ├─ 显示"创建中..."状态
        ├─ API 调用 createCalendarEvent()
        ├─ 关闭模态框
        ├─ 刷新日历视图
        └─ 新事件标记出现在对应日期
        ↓
    [交互10] 点击"取消"按钮
        ├─ 关闭表单模态框
        └─ 放弃所有输入
```

### 6.3 事件详情和操作

```
用户点击日历中的事件或从列表查看
        ↓
    [交互1] 点击事件卡片/标记
        ├─ 展开事件详情视图
        ├─ 显示完整事件信息:
        │   ├─ 事件标题
        │   ├─ 事件类型 (带图标)
        │   ├─ 计划日期和时间
        │   ├─ 事件状态 (带颜色标识)
        │   ├─ 关联供应商名称
        │   ├─ 参与人员
        │   ├─ 地点
        │   ├─ 预计时长
        │   └─ 备注
        └─ 显示操作按钮: 编辑/删除
        ↓
    [交互2] 点击"编辑"按钮
        ├─ 打开编辑表单，预填现有数据
        └─ 可修改所有字段
        ↓
    [交互3] 更新事件状态
        ├─ 显示状态下拉选择器
        ├─ 选项: 计划中/已完成/已取消/已改期
        ├─ 选择新状态
        └─ 继续下一步
        ↓
    [交互4] 点击"保存"按钮
        ├─ API 调用 updateCalendarEvent()
        ├─ 关闭表单
        ├─ 刷新日历视图
        └─ 事件状态标记更新
        ↓
    [交互5] 点击"删除"按钮
        ├─ 显示确认对话框: "确认删除此事件?"
        ├─ 确认后调用 deleteCalendarEvent()
        ├─ 从数据库删除
        └─ 刷新日历视图
```

### 6.4 事件筛选

```
用户在驾驶舱日历区域
        ↓
    [交互1] 点击状态筛选下拉
        ├─ 显示筛选选项: 全部/计划中/已完成
        ├─ 选择特定状态
        └─ 重新筛选事件列表
        └─ 日历只显示该状态事件
        ↓
    [交互2] 按供应商筛选 (如有)
        ├─ 显示供应商选择器
        ├─ 选择特定供应商
        └─ 重新筛选事件列表
        └─ 日历只显示该供应商事件
```

---

## 7. 绩效管理流程

### 7.1 生命周期管理

```
用户访问 /performance/lifecycle
        ↓
    [显示] 查看生命周期图表
        ├─ 显示各阶段供应商分布
        ├─ 考察期 → 核心期 → 战略期
        └─ 每个阶段显示供应商数量
        ↓
    [交互1] 拖拽供应商卡片
        ├─ 拖动供应商到新阶段
        ├─ 显示阶段变更动画
        ├─ 调用 API 更新 stage
        └─ 刷新图表数据
        ↓
    [交互2] 点击阶段筛选按钮
        ├─ 只显示特定阶段供应商
        └─ 重新筛选图表数据
```

### 7.2 绩效评估

```
用户访问 /performance/appraisal
        ↓
    [显示] 查看评估页面
        ├─ 左侧供应商列表 (可筛选)
        └─ 右侧评估表单区域
        ↓
    [交互1] 选择要评估的供应商
        ├─ 点击供应商下拉
        ├─ 显示供应商列表
        └─ 选择供应商
        ↓
    [交互2] 选择评估周期
        ├─ 点击周期选择器 (Q1/Q2/Q3/Q4)
        └─ 确定选择
        ↓
    [交互3] 显示绩效配置维度
        ├─ 读取该供应商的绩效配置
        ├─ 显示各维度输入框
        └─ 显示权重
        ↓
    [交互4] 输入各维度评分
        ├─ 为每个维度输入 0-100 分数
        ├─ 自动计算加权总分
        └─ 实时显示总分
        ↓
    [交互5] 填写评语
        ├─ 输入评估评语
        └─ 继续下一步
        ↓
    [交互6] 点击"提交评估"按钮
        ├─ [验证] 所有评分已填写
        ├─ API 调用 createPerformanceEvaluation()
        ├─ 显示"提交中..."状态
        ├─ 关闭表单
        ├─ 刷新评估记录列表
        └─ 显示成功提示
```

### 7.3 分级策略

```
用户访问 /performance/tiering
        ↓
    [显示] 查看分级策略页面
        ├─ 显示各层级定义和条件
        └─ 显示每个层级的供应商列表
        ↓
    [交互1] 拖拽供应商卡片到新层级
        ├─ 拖动供应商到新层级区域
        ├─ 显示层级变更动画
        ├─ 调用 API 更新 tier
        └─ 刷新图表和列表
        ↓
    [交互2] 点击层级筛选按钮
        ├─ 只显示特定层级供应商
        └─ 重新筛选显示
```

---

## 8. 业务配置流程

### 8.1 业务配置页面布局

```
用户访问 /settings
        ↓
    [显示] 页面布局: 左右两栏
        ├─ 左侧: 供应商列表 (带搜索)
        └─ 右侧: 配置面板
        ↓
    [交互1] 点击左侧供应商
        ├─ 加载该供应商数据
        └─ 右侧显示该供应商的配置表单
        └─ 激活当前供应商
        ↓
    [交互2] 在左侧搜索供应商
        ├─ 在搜索框输入供应商名称
        └─ 供应商列表实时筛选
        └─ 点击搜索结果更新右侧
```

### 8.2 财务配置

```
用户在业务配置页选择供应商后
        ↓
    [显示] 查看财务配置区域
        ├─ 显示当前配置: 结算周期、结算基准、账期天数
        └─ 各字段显示当前值
        ↓
    [交互1] 修改结算周期
        ├─ 点击下拉选择器
        ├─ 选项: 月结/半月结/周结/票结
        └─ 选择新周期
        └─ 失焦触发自动保存
        ↓
    [交互2] 修改结算基准
        ├─ 点击下拉选择器
        ├─ 选项: ETD/ETA/Gate-in/Invoice Date
        └─ 选择新基准
        └─ 失焦触发自动保存
        ↓
    [交互3] 修改账期天数
        ├─ 输入新的账期天数
        └─ 失焦触发自动保存
        └─ 显示"保存中..."状态
        ├─ 成功后显示"已保存"提示
```

### 8.3 门户权限配置

```
用户在业务配置页查看门户权限区域
        ↓
    [显示] 查看门户权限配置
        ├─ 四个权限开关显示:
        │   ├─ 需求广播 (demand_broadcast)
        │   ├─ 赋能中心 (empowerment_center)
        │   ├─ 工单系统 (ticket_system)
        │   └─ 绩效查看 (performance_view)
        └─ 每个开关显示当前状态 (开启/关闭)
        ↓
    [交互1] 切换需求广播开关
        ├─ 点击开关切换状态
        ├─ 失焦触发自动保存
        └─ 开关状态更新
        ↓
    [交互2] 切换赋能中心开关
        ├─ 点击开关切换状态
        ├─ 失焦触发自动保存
        └─ 开关状态更新
        ↓
    [交互3] 切换工单系统开关
        ├─ 点击开关切换状态
        ├─ 失焦触发自动保存
        └─ 开关状态更新
        ↓
    [交互4] 切换绩效查看开关
        ├─ 点击开关切换状态
        ├─ 失焦触发自动保存
        └─ 开关状态更新
```

### 8.4 分级管理

```
用户在业务配置页查看分级管理区域
        ↓
    [显示] 查看当前供应商层级
        ├─ 层级标签显示 (战略/核心/储备/考察/黑名单)
        └─ 当前层级高亮
        ↓
    [交互1] 修改层级
        ├─ 点击层级下拉选择器
        ├─ 选择新层级
        └─ 失焦触发自动保存
        ↓
    [保存成功后]
        ├─ 刷新左侧供应商列表
        ├─ 更新层级标签显示
        └─ 更新供应商详情页层级信息
```

### 8.5 绩效配置

```
用户在业务配置页查看绩效配置区域
        ↓
    [显示] 查看绩效配置
        ├─ 显示评估周期选择器
        ├─ 显示当前评估周期 (如: 季度/季度/月度)
        └─ 显示各维度配置和权重
        ↓
    [交互1] 修改评估周期
        ├─ 点击周期下拉选择器
        ├─ 选择新周期
        └─ 失焦触发自动保存
        ↓
    [交互2] 添加评估维度
        ├─ 点击"添加维度"按钮
        ├─ 打开维度配置表单
        ├─ 输入维度名称
        ├─ 设置权重 (0-1)
        └─ 保存配置
        ↓
    [交互3] 删除评估维度
        ├─ 点击维度的"删除"按钮
        ├─ 显示确认对话框
        ├─ 确认后删除
        └─ 刷新配置
```

### 8.6 实时保存机制

```
用户在业务配置页修改任何配置
        ↓
    [交互] 修改任意配置字段
        ├─ 失焦触发自动保存流程
        ├─ 检测数据变更
        ├─ API 调用更新接口
        ├─ 显示"保存中..."状态
        └─ 成功后显示"已保存"提示
        └─ 2秒后提示消失
        ↓
    [场景] 保存失败
        ├─ 显示错误提示
        ├─ 显示"重试"按钮
        └─ 保持当前值不变
        ↓
    [场景] 快速连续修改
        ├─ 用户快速修改多个字段
        ├─ 每个字段失焦都触发保存
        ├─ 可能产生多个并发的保存请求
        └─ 最后一次保存成功生效
```

---

## 9. 异常和边界流程

### 9.1 网络异常处理

```
用户在任何页面进行操作
        ↓
    [场景A] 网络断开
        ├─ 用户点击按钮
        ├─ 请求超时/失败
        └─ 显示"网络连接失败"错误提示
        ├─ 显示"重试"按钮
        └─ 禁用操作按钮
        ↓
    [场景B] API 限流
        ├─ 用户频繁操作
        ├─ 返回 429 Too Many Requests
        └─ 显示"操作过于频繁，请稍后再试"
        └─ 提供冷却时间
        ↓
    [场景C] 服务器错误 (500/503)
        ├─ API 调用失败
        └─ 显示"服务器错误，请稍后重试"
        └─ 记录错误日志
```

### 9.2 数据验证边界

```
用户填写表单或提交数据
        ↓
    [场景A] 提交空必填字段
        ├─ 表单验证拦截
        ├─ 高亮空字段
        ├─ 显示"请填写此字段"
        └─ 阻止提交
        ↓
    [场景B] 输入非法邮箱格式
        ├─ 邮箱格式验证拦截
        ├─ 显示"请输入有效的邮箱地址"
        └─ 聚焦邮箱字段
        ↓
    [场景C] 密码过于简单
        ├─ 密码强度检查失败
        ├─ 显示"密码过于简单，请使用更复杂的密码"
        ├─ 建议包含大小写、数字、特殊字符
        └─ 聚焦密码字段
        ↓
    [场景D] 供应商代码重复
        ├─ 实时检查发现代码已存在
        ├─ 显示"供应商代码已存在"
        └─ 禁用提交按钮
        └─ 建议使用其他代码
        ↓
    [场景E] 绩效分数超出范围
        ├─ 输入 <0 或 >100 的分数
        ├─ 显示"分数必须在 0-100 之间"
        ├─ 自动修正为边界值 (0 或 100)
        └─ 继续下一步
        ↓
    [场景F] 亲密度超出范围
        ├─ 滑块限制在 1-5
        ├─ 用户尝试设置其他值
        ├─ 强制限制在范围内
        └─ 显示提示"亲密度必须在 1-5 之间"
```

### 9.3 并发编辑冲突

```
两个用户同时编辑同一供应商
        ↓
    [交互] 用户 A 打开供应商详情
        ├─ 加载并显示当前数据
        ↓
    [交互] 用户 B 同时打开同一供应商
        ├─ 加载并显示当前数据
        ↓
    [交互] 用户 A 修改供应商名称
        ├─ 失焦触发保存
        ├─ 显示"保存中..."
        └─ 保存成功
        ↓
    [交互] 用户 B 修改供应商名称 (未刷新)
        ├─ 看到的仍是旧名称
        ├─ 失焦触发保存
        ├─ 显示"保存中..."
        └─ 保存成功
        ↓
    [冲突] 用户 A 刷新页面
        ├─ 加载最新数据
        ├─ 看到用户 B 的修改已生效
        ├─ 用户 B 的修改被覆盖
        └─ 或显示"数据已被其他用户修改"
```

### 9.4 文件上传边界

```
用户上传文件
        ↓
    [场景A] 文件过大
        ├─ 选择超过 10MB 的文件
        ├─ 显示"文件过大，最大支持 10MB"
        ├─ 阻止上传
        └─ 建议压缩文件或选择其他文件
        ↓
    [场景B] 文件类型不支持
        ├─ 选择 .exe 或 .bat 等文件
        ├─ 显示"不支持的文件类型，请选择 PDF、图片等"
        ├─ 清空文件选择
        ↓
    [场景C] 上传中断
        ├─ 上传过程中网络断开
        ├─ 进度条停止
        ├─ 显示"上传失败，请重试"
        └─ 提供重试按钮
        ↓
    [场景D] 存储空间不足
        ├─ Supabase Storage 桶已满
        ├─ 显示"存储空间不足，请联系管理员"
        ├─ 阻止上传
```

### 9.5 Session 过期处理

```
用户正在使用系统
        ↓
    [交互] 用户点击任何操作
        ├─ API 调用
        ├─ 返回 401 Unauthorized
        └─ Session 已过期
        ↓
    [处理] 清除本地存储的 token
        ├─ 重定向到 /login
        └─ 显示"登录已过期，请重新登录"
        ↓
    [自动刷新] (如配置了自动刷新)
        ├─ 使用 refresh token 尝试自动刷新
        └─ 成功后保持用户状态
```

### 9.6 空状态处理

```
用户访问列表页，但无数据
        ↓
    [显示] 空状态提示
        ├─ 显示"暂无供应商"或"暂无数据"
        ├─ 显示"新增供应商"按钮 (主要操作)
        └─ 引导用户进行首次操作
        ↓
    [交互] 点击"新增供应商"
        ├─ 打开创建表单
        └─ 填写信息
        └─ 完成首次创建
```

---

## 交互流程复杂度矩阵

| 功能模块 | 交互数量 | 复杂度 | 优先级 |
|----------|----------|--------|--------|
| 认证流程 | 25+ | 高 | P0 |
| 全局导航 | 15 | 低 | P0 |
| 供应商列表 | 35+ | 中 | P0 |
| 供应商详情 | 80+ | 高 | P0 |
| 文件管理 | 25+ | 中 | P1 |
| 日历功能 | 30+ | 中 | P1 |
| 绩效管理 | 20+ | 中 | P1 |
| 业务配置 | 30+ | 中 | P1 |
| 异常边界 | 25+ | 高 | P0 |
| **总计** | **285+** | - | - |

---

## 待补充的交互流程

请审核以上流程，特别关注以下方面：

### 1. 遗漏的交互路径
- [ ] 移动端/平板适配的交互
- [ ] 键盘快捷键操作
- [ ] 右键菜单的完整交互

### 2. 多用户协作场景
- [ ] 任务分配和流转
- [ ] 评论和备注功能
- [ ] @提及和通知

### 3. 数据导出和报表
- [ ] 供应商列表导出
- [ ] 绩效报告生成
- [ ] 互动记录导出

### 4. 高级搜索和筛选
- [ ] 组合条件筛选
- [ ] 保存搜索条件
- [ ] 搜索历史记录

### 5. 实时通知和更新
- [ ] WebSocket 实时更新
- [ ] 操作结果实时反馈
- [ ] 多设备同步

请审核以上流程并补充遗漏部分！
